# Week2

### 一. 数据库物理外键移除原因

1. 性能影响：**物理外键其实是强调了数据的完整性和强一致性**，但是这会在一定程度上影响数据库性能。
2. 热更新：物理外键可能导致服务器无法进行热更新。
3. 降低耦合度：删除物理外键，是指删除了表之间的物理上的依赖关系，但是逻辑上外键依然存在，可以适当降低表之间的耦合度。
4. 数据库分库分表：物理外键关联耦合度较高，可能导致难以进行分库分表。

### 二. Spring事务传播行为

1. REQUIRED：使用当前事务。如果当前存在事务，则加入当前事务成为一个整体；如果当前没有事务，则创建一个新的事务。**多用于增删改的情况(最常用)。**
2. SUPPORTS：如果当前有事务，则使用当前事务，否则不使用事务。**多用于查询。**
3. MANDATORY：强制当前必须存在事务。如果当前没有事务，则抛出异常。
4. REQUIRES_NEW：创建新的事务。如果当前存在事务，则挂起当前事务，并创建一个新的事务。如果当前没有事务，则作用同REQUIRED。
5. NOT_SUPPORTED：以非事务方式执行。如果当前存在事务，则挂起当前事务。
6. NEVER：以非事务方式执行。如果当前存在事务，则抛出异常。
7. NESTED：事务嵌套。如果当前存在一个事务，则以嵌套事务方式执行，否则作用同REQUIRED。嵌套事务：如果父事务提交或回滚，会携带子事务同时提交或回滚。如果子事务回滚，则父事务可以选择是否回滚。

### 三. Cookie VS Session

1. Cookie
   1. 以键值对的形式，在浏览器存储信息(可以理解为浏览器缓存)。
   2. Cookie所保存内容的大小有限制，一般为4KB。
   3. Cookie不能跨域，仅在当前域名及父域名下可以取值。
   4. Cookie可以设置有效期。
   5. Cookie可以设置path(一般为/)。
2. Session
   1. 基于服务器内存的缓存(非持久化)，可保存请求会话。
   2. 每个Session通过sessionId来区分不同的请求。
   3. Session可设置过期时间。
   4. Session也是以键值对形式保存数据的。
   5. 客户端第一次请求服务器时，会创建一个新的jSessionId，保存在服务器端，并同时放在客户端的Cookie中。后面该客户端的所有请求都会携带这个jSessionId，直到Session过期。